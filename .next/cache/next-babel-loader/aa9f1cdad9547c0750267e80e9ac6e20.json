{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Layout from '../../components/layout';\nimport Campaign from '../../ethernum/campaign';\nimport { Card, Grid, Button } from 'semantic-ui-react';\nimport web3 from '../../ethernum/web3';\nimport ContributeFrom from '../../components/contributeForm';\nimport { Link } from '../../routes';\n\nvar CompaignShow = /*#__PURE__*/function (_React$Component) {\n  _inherits(CompaignShow, _React$Component);\n\n  var _super = _createSuper(CompaignShow);\n\n  function CompaignShow() {\n    _classCallCheck(this, CompaignShow);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CompaignShow, [{\n    key: \"renderCards\",\n    value: function renderCards() {\n      var _this$props = this.props,\n          address = _this$props.address,\n          mininumContribute = _this$props.mininumContribute,\n          balance = _this$props.balance,\n          requestCount = _this$props.requestCount,\n          approvalCount = _this$props.approvalCount,\n          manager = _this$props.manager;\n      var items = [{\n        header: manager,\n        meta: '管理者地址',\n        description: '当前管理者创建了众筹，并且是众筹的受益人',\n        style: {\n          overflowWrap: 'break-word'\n        }\n      }, {\n        header: mininumContribute,\n        meta: '最小贡献量',\n        description: '投资的最小贡献量',\n        style: {\n          overflowWrap: 'break-word'\n        }\n      }, {\n        header: requestCount,\n        meta: '请求数量',\n        description: '当前管理者的创建请求从合约中提钱，必须要大于50%的投资人同意',\n        style: {\n          overflowWrap: 'break-word'\n        }\n      }, {\n        header: approvalCount,\n        meta: '投资人数量',\n        description: '已经为众筹投资的投资人数量',\n        style: {\n          overflowWrap: 'break-word'\n        }\n      }, {\n        header: web3.utils.fromWei(balance, 'ether'),\n        meta: '众筹合约金额(ether)',\n        description: '当前众筹中，还剩下的金额',\n        style: {\n          overflowWrap: 'break-word'\n        }\n      }];\n      return __jsx(Card.Grop, {\n        items: items\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(Layout, null, __jsx(\"h1\", null, \"\\u4F17\\u7B79\\u663E\\u793A\"), __jsx(Grid, null, __jsx(Grid.Row, null, __jsx(Grid.Column, {\n        width: 10\n      }, this.renderCards()), __jsx(Grid.Column, {\n        width: 6\n      }, __jsx(ContributeForm, {\n        address: this.props.address\n      }))), __jsx(Grid.Row, null, __jsx(Grid.Column, null, __jsx(Link, {\n        route: \"/compaigns/\".concat(this.props.address, \"/requests\")\n      }, __jsx(\"a\", null, __jsx(Button, {\n        primary: true\n      }, \"\\u67E5\\u770B\\u8BF7\\u6C42\")))))), \"//\", this.renderCards(), \"//\", __jsx(ContributeForm, null));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(props) {\n      var campaign, sumary;\n      return _regeneratorRuntime.async(function getInitialProps$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              //console.log(props.query.address);\n              campaign = Campaign(props.query.address);\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(campaign.methods.getSumary().call());\n\n            case 3:\n              sumary = _context.sent;\n              return _context.abrupt(\"return\", {\n                address: props.query.address,\n                mininumContribute: sumary[0],\n                balance: sumary[1],\n                requestCount: sumary[2],\n                approvalCount: sumary[3],\n                manager: sumary[4]\n              });\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }]);\n\n  return CompaignShow;\n}(React.Component);\n\nexport default CompaignShow;","map":{"version":3,"sources":["D:/fullstackDapp/pages/compaigns/show.js"],"names":["React","Layout","Campaign","Card","Grid","Button","web3","ContributeFrom","Link","CompaignShow","props","address","mininumContribute","balance","requestCount","approvalCount","manager","items","header","meta","description","style","overflowWrap","utils","fromWei","renderCards","campaign","query","methods","getSumary","call","sumary","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Layout from '../../components/layout';\nimport Campaign from '../../ethernum/campaign';\nimport {Card,Grid,Button} from 'semantic-ui-react';\nimport web3 from '../../ethernum/web3';\nimport ContributeFrom from '../../components/contributeForm';\nimport {Link} from '../../routes'\n\nclass CompaignShow extends React.Component{\n\n\n  static async getInitialProps(props){\n     //console.log(props.query.address);\n     const campaign = Campaign(props.query.address);\n     const sumary =   await campaign.methods.getSumary().call();\n     //console.log(sumary);\n     return {\n       address:props.query.address,\n       mininumContribute:sumary[0],\n       balance:sumary[1],\n       requestCount:sumary[2],\n       approvalCount:sumary[3],\n       manager:sumary[4]\n     };\n  }\n\n  renderCards(){\n    const{\n      address,\n      mininumContribute,\n      balance,\n      requestCount,\n      approvalCount,\n      manager\n    }=this.props;\n    const items =[\n      {\n        header:manager,\n        meta:'管理者地址',\n        description:'当前管理者创建了众筹，并且是众筹的受益人',\n        style:{overflowWrap:'break-word'}\n      },\n      {\n        header:mininumContribute,\n        meta:'最小贡献量',\n        description:'投资的最小贡献量',\n        style:{overflowWrap:'break-word'}\n      },\n      {\n        header:requestCount,\n        meta:'请求数量',\n        description:'当前管理者的创建请求从合约中提钱，必须要大于50%的投资人同意',\n        style:{overflowWrap:'break-word'}\n      },\n      {\n        header:approvalCount,\n        meta:'投资人数量',\n        description:'已经为众筹投资的投资人数量',\n        style:{overflowWrap:'break-word'}\n      },\n      {\n        header:web3.utils.fromWei(balance,'ether'),\n        meta:'众筹合约金额(ether)',\n        description:'当前众筹中，还剩下的金额',\n        style:{overflowWrap:'break-word'}\n      }\n    ];\n    return <Card.Grop items={items}/>\n  }\n\n  render(){\n\n    return (\n      <Layout>\n        <h1>众筹显示</h1>\n        <Grid>\n         <Grid.Row>\n          <Grid.Column width={10}>\n            {this.renderCards()}\n\n          </Grid.Column>\n          <Grid.Column width={6}>\n            <ContributeForm address={this.props.address}/>\n          </Grid.Column>\n          </Grid.Row>\n\n          <Grid.Row>\n           <Grid.Column>\n              <Link route={`/compaigns/${this.props.address}/requests`}>\n              <a>\n              <Button primary>查看请求</Button>\n              </a>\n              </Link>\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n        //{this.renderCards()}\n        //<ContributeForm/>\n      </Layout>\n    )\n\n\n  }\n}\n\n\nexport default CompaignShow;\n"]},"metadata":{},"sourceType":"module"}