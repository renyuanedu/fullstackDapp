{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport Layout from '../../components/layout';\nimport Campaign from '../../ethernum/campaign';\nimport { Card, Grid, Button } from 'semantic-ui-react';\nimport web3 from '../../ethernum/web3';\nimport ContributeFrom from '../../components/contributeForm';\nimport { Link } from '../../routes';\n\nclass CompaignShow extends React.Component {\n  static async getInitialProps(props) {\n    //console.log(props.query.address);\n    const campaign = Campaign(props.query.address);\n    const sumary = await campaign.methods.getSumary().call(); //console.log(sumary);\n\n    return {\n      address: props.query.address,\n      mininumContribute: sumary[0],\n      balance: sumary[1],\n      requestCount: sumary[2],\n      approvalCount: sumary[3],\n      manager: sumary[4]\n    };\n  }\n\n  renderCards() {\n    const {\n      address,\n      mininumContribute,\n      balance,\n      requestCount,\n      approvalCount,\n      manager\n    } = this.props;\n    const items = [{\n      header: manager,\n      meta: '管理者地址',\n      description: '当前管理者创建了众筹，并且是众筹的受益人',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: mininumContribute,\n      meta: '最小贡献量',\n      description: '投资的最小贡献量',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: requestCount,\n      meta: '请求数量',\n      description: '当前管理者的创建请求从合约中提钱，必须要大于50%的投资人同意',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: approvalCount,\n      meta: '投资人数量',\n      description: '已经为众筹投资的投资人数量',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: web3.utils.fromWei(balance, 'ether'),\n      meta: '众筹合约金额(ether)',\n      description: '当前众筹中，还剩下的金额',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }];\n    return __jsx(Card.Grop, {\n      items: items\n    });\n  }\n\n  render() {\n    //const sumary = this.props.sumary;\n    //console.log(address);\n    //console.log(mininumContribute);\n    return __jsx(Layout, null, __jsx(\"h1\", null, \"\\u4F17\\u7B79\\u663E\\u793A\"), __jsx(Grid, null, __jsx(Grid.Row, null, __jsx(Grid.Column, {\n      width: 10\n    }, this.renderCards()), __jsx(Grid.Column, {\n      width: 6\n    }, __jsx(ContributeFrom, {\n      address: this.props.address\n    }))), __jsx(Grid.Row, null, __jsx(Grid.Column, null, __jsx(Link, {\n      route: `/compaigns/${this.props.address / requests}`\n    }, __jsx(\"a\", null, __jsx(Button, {\n      primary: true\n    }, \"\\u67E5\\u770B\\u8BF7\\u6C42\")))))), \"//\", this.renderCards(), \"//\", __jsx(ContributeFrom, null));\n  }\n\n}\n\nexport default CompaignShow;","map":{"version":3,"sources":["D:/fullstackDapp/pages/compaigns/show.js"],"names":["React","Layout","Campaign","Card","Grid","Button","web3","ContributeFrom","Link","CompaignShow","Component","getInitialProps","props","campaign","query","address","sumary","methods","getSumary","call","mininumContribute","balance","requestCount","approvalCount","manager","renderCards","items","header","meta","description","style","overflowWrap","utils","fromWei","render","requests"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Layout from '../../components/layout';\nimport Campaign from '../../ethernum/campaign';\nimport {Card,Grid,Button} from 'semantic-ui-react';\nimport web3 from '../../ethernum/web3';\nimport ContributeFrom from '../../components/contributeForm';\nimport {Link} from '../../routes'\n\nclass CompaignShow extends React.Component{\n\n\n  static async getInitialProps(props){\n     //console.log(props.query.address);\n     const campaign = Campaign(props.query.address);\n     const sumary =   await campaign.methods.getSumary().call();\n     //console.log(sumary);\n     return {\n       address:props.query.address,\n       mininumContribute:sumary[0],\n       balance:sumary[1],\n       requestCount:sumary[2],\n       approvalCount:sumary[3],\n       manager:sumary[4]\n     };\n  }\n\n  renderCards(){\n    const{\n      address,\n      mininumContribute,\n      balance,\n      requestCount,\n      approvalCount,\n      manager\n    }=this.props;\n    const items =[\n      {\n        header:manager,\n        meta:'管理者地址',\n        description:'当前管理者创建了众筹，并且是众筹的受益人',\n        style:{overflowWrap:'break-word'}\n      },\n      {\n        header:mininumContribute,\n        meta:'最小贡献量',\n        description:'投资的最小贡献量',\n        style:{overflowWrap:'break-word'}\n      },\n      {\n        header:requestCount,\n        meta:'请求数量',\n        description:'当前管理者的创建请求从合约中提钱，必须要大于50%的投资人同意',\n        style:{overflowWrap:'break-word'}\n      },\n      {\n        header:approvalCount,\n        meta:'投资人数量',\n        description:'已经为众筹投资的投资人数量',\n        style:{overflowWrap:'break-word'}\n      },\n      {\n        header:web3.utils.fromWei(balance,'ether'),\n        meta:'众筹合约金额(ether)',\n        description:'当前众筹中，还剩下的金额',\n        style:{overflowWrap:'break-word'}\n      }\n    ];\n    return <Card.Grop items={items}/>\n  }\n\n  render(){\n    //const sumary = this.props.sumary;\n\n\n    //console.log(address);\n    //console.log(mininumContribute);\n    return (\n      <Layout>\n        <h1>众筹显示</h1>\n        <Grid>\n         <Grid.Row>\n          <Grid.Column width={10}>\n            {this.renderCards()}\n\n          </Grid.Column>\n          <Grid.Column width={6}>\n            <ContributeFrom address={this.props.address}/>\n          </Grid.Column>\n          </Grid.Row>\n\n          <Grid.Row>\n           <Grid.Column>\n              <Link route={`/compaigns/${this.props.address/requests}`}>\n              <a>\n              <Button primary>查看请求</Button>\n              </a>\n              </Link>\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n        //{this.renderCards()}\n        //<ContributeFrom/>\n      </Layout>\n    )\n\n\n  }\n}\n\n\nexport default CompaignShow;\n"]},"metadata":{},"sourceType":"module"}