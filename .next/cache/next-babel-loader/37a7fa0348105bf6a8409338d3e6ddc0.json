{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { Form, Input, Button, Message } from 'semantic-ui-react';\nimport Campaign from '../ethernum/campaign';\nimport web3 from '../ethernum/web3';\nimport { Router } from '../routes';\n\nclass ContributeForm extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      value: '',\n      errorMessage: '',\n      loading: 'false'\n    });\n\n    _defineProperty(this, \"onSubmit\", async () => {\n      event.preventDefault();\n      const campaign = Campaign(this.props.address);\n      const accounts = await web3.eth.getAccounts();\n      this.setState({\n        loading: true\n      });\n\n      try {\n        await campaign.methods.contribute().send({\n          from: accounts[0],\n          value: web3.utils.toWei(this.state.value, 'ether')\n        });\n      } catch (error) {\n        this.setState({\n          errorMessage: error.message\n        });\n      }\n\n      Router.replaceRoute(`/compaigns/${this.props.address}`);\n      this.setState({\n        loading: false\n      });\n    });\n  }\n\n  render() {\n    return __jsx(Form, {\n      onSubmit: this.onSubmit,\n      error: !!this.state.errorMessage\n    }, __jsx(Form.Field, null, __jsx(\"label\", null, \"\\u603B\\u7684\\u6295\\u8D44\\u989D\\u5EA6\"), __jsx(\"input\", {\n      value: this.state.value,\n      onChange: event => this.setState({\n        value: event.target.value\n      }),\n      label: \"ether\",\n      labelPosition: \"right\"\n    })), __jsx(Message, {\n      error: true,\n      header: \"\\u9519\\u8BEF\\u63D0\\u793A\",\n      content: this.state.errorMessage\n    }), __jsx(Button, {\n      primary: true,\n      loading: this.state.loading\n    }, \"\\u6295\\u8D44\"));\n  }\n\n}\n\nexport default contributeForm;","map":{"version":3,"sources":["D:/fullstackDapp/components/contributeForm.js"],"names":["React","Component","Form","Input","Button","Message","Campaign","web3","Router","ContributeForm","value","errorMessage","loading","event","preventDefault","campaign","props","address","accounts","eth","getAccounts","setState","methods","contribute","send","from","utils","toWei","state","error","message","replaceRoute","render","onSubmit","target","contributeForm"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA8B,OAA9B;AACA,SAASC,IAAT,EAAcC,KAAd,EAAoBC,MAApB,EAA2BC,OAA3B,QAA0C,mBAA1C;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,SAAQC,MAAR,QAAqB,WAArB;;AAEA,MAAMC,cAAN,SAA6BR,SAA7B,CAAsC;AAAA;AAAA;;AAAA,mCAE9B;AACJS,MAAAA,KAAK,EAAC,EADF;AAEJC,MAAAA,YAAY,EAAC,EAFT;AAGJC,MAAAA,OAAO,EAAC;AAHJ,KAF8B;;AAAA,sCAS1B,YAAU;AACnBC,MAAAA,KAAK,CAACC,cAAN;AACA,YAAMC,QAAQ,GAAGT,QAAQ,CAAC,KAAKU,KAAL,CAAWC,OAAZ,CAAzB;AACA,YAAMC,QAAQ,GAAG,MAAMX,IAAI,CAACY,GAAL,CAASC,WAAT,EAAvB;AACA,WAAKC,QAAL,CAAc;AAACT,QAAAA,OAAO,EAAC;AAAT,OAAd;;AACA,UAAG;AACD,cAAMG,QAAQ,CAACO,OAAT,CAAiBC,UAAjB,GAA8BC,IAA9B,CAAmC;AACvCC,UAAAA,IAAI,EAACP,QAAQ,CAAC,CAAD,CAD0B;AAEvCR,UAAAA,KAAK,EAACH,IAAI,CAACmB,KAAL,CAAWC,KAAX,CAAiB,KAAKC,KAAL,CAAWlB,KAA5B,EAAkC,OAAlC;AAFiC,SAAnC,CAAN;AAGC,OAJH,CAIG,OAAMmB,KAAN,EAAY;AACX,aAAKR,QAAL,CAAc;AAACV,UAAAA,YAAY,EAACkB,KAAK,CAACC;AAApB,SAAd;AACD;;AACDtB,MAAAA,MAAM,CAACuB,YAAP,CAAqB,cAAa,KAAKf,KAAL,CAAWC,OAAQ,EAArD;AACA,WAAKI,QAAL,CAAc;AAACT,QAAAA,OAAO,EAAC;AAAT,OAAd;AACH,KAvBoC;AAAA;;AAyBpCoB,EAAAA,MAAM,GAAE;AACN,WACE,MAAC,IAAD;AAAM,MAAA,QAAQ,EAAE,KAAKC,QAArB;AAA+B,MAAA,KAAK,EAAE,CAAC,CAAC,KAAKL,KAAL,CAAWjB;AAAnD,OACE,MAAC,IAAD,CAAM,KAAN,QACC,4DADD,EAEC;AACE,MAAA,KAAK,EAAE,KAAKiB,KAAL,CAAWlB,KADpB;AAEE,MAAA,QAAQ,EAAEG,KAAK,IAAE,KAAKQ,QAAL,CAAc;AAACX,QAAAA,KAAK,EAACG,KAAK,CAACqB,MAAN,CAAaxB;AAApB,OAAd,CAFnB;AAGE,MAAA,KAAK,EAAC,OAHR;AAIE,MAAA,aAAa,EAAC;AAJhB,MAFD,CADF,EAUE,MAAC,OAAD;AAAS,MAAA,KAAK,MAAd;AAAe,MAAA,MAAM,EAAC,0BAAtB;AAA6B,MAAA,OAAO,EAAE,KAAKkB,KAAL,CAAWjB;AAAjD,MAVF,EAWE,MAAC,MAAD;AAAQ,MAAA,OAAO,MAAf;AAAgB,MAAA,OAAO,EAAE,KAAKiB,KAAL,CAAWhB;AAApC,sBAXF,CADF;AAeD;;AAzCmC;;AA6CtC,eAAeuB,cAAf","sourcesContent":["import React,{Component} from 'react';\nimport { Form,Input,Button,Message } from 'semantic-ui-react';\nimport Campaign from '../ethernum/campaign';\nimport web3 from '../ethernum/web3';\nimport {Router} from '../routes';\n\nclass ContributeForm extends Component{\n\n  state={\n    value:'',\n    errorMessage:'',\n    loading:'false'\n\n  };\n\n onSubmit = async ()=>{\n   event.preventDefault();\n   const campaign = Campaign(this.props.address);\n   const accounts = await web3.eth.getAccounts();\n   this.setState({loading:true});\n   try{\n     await campaign.methods.contribute().send({\n       from:accounts[0],\n       value:web3.utils.toWei(this.state.value,'ether')})\n     }catch(error){\n       this.setState({errorMessage:error.message});\n     }\n     Router.replaceRoute(`/compaigns/${this.props.address}`)\n     this.setState({loading:false});\n }\n\n  render(){\n    return(\n      <Form onSubmit={this.onSubmit} error={!!this.state.errorMessage}>\n        <Form.Field>\n         <label>总的投资额度</label>\n         <input\n           value={this.state.value}\n           onChange={event=>this.setState({value:event.target.value})}\n           label=\"ether\"\n           labelPosition=\"right\"\n           />\n        </Form.Field>\n        <Message error header=\"错误提示\" content={this.state.errorMessage}/>\n        <Button primary loading={this.state.loading}>投资</Button>\n      </Form>\n    )\n  }\n}\n\n\nexport default contributeForm;\n"]},"metadata":{},"sourceType":"module"}