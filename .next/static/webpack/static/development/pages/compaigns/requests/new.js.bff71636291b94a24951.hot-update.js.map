{"version":3,"file":"static/webpack/static\\development\\pages\\compaigns\\requests\\new.js.bff71636291b94a24951.hot-update.js","sources":["webpack:///./pages/compaigns/requests/new.js"],"sourcesContent":["import React,{Component} from 'react';\nimport { Form,Input,Button,Message } from 'semantic-ui-react';\nimport Layout from '../../../components/layout';\nimport Campaign from '../../../ethernum/campaign';\nimport web3 from '../../../ethernum/web3';\nimport {Router,Link} from '../../../routes';\n\nclass CompaignNew extends Component{\n\n state={\n   description:'',\n   errorMessage:'',\n   value:'',\n   reciptientAddress:''\n\n };\n\n static async getInitialProps(props){\n   const {address} = props.query;\n   return {address};\n }\n\n\n onSubmit= async()=>{\n   event.preventDefault();\n   const campaign = Campaign(this.props.address);\n   const accounts = await web3.eth.getAccounts();\n   const {description,value,reciptientAddress} = this.state;\n   this.setState({loading:true});\n\n   try{\n     await campaign.methods.createRequest(description,web3.utils.toWei(value,'ether'),reciptientAddress).send({\n       from:accounts[0]\n\n     });\n     Router.pushRoute(`/compaigns/${this.props.address}/requests`)\n   }catch(err){\n     this.setState({errorMessage:err.message});\n   }\n   this.setState({loading:false});\n }\n\n  render(){\n\n\n    return(\n      <Layout>\n      <Link route={`/compaigns/${this.props.address}/requests`}>\n       <a>返回</a>\n      </Link>\n      <Form onSubmit={this.onSubmit} error={!!this.state.errorMessage}>\n                  <Form.Field>\n                        <label>请求描述：</label>\n                        <Input\n                        value={this.state.description}\n                        onChange={event=>this.setState({description:event.target.value})}\n                        />\n                  </Form.Field>\n                  <Form.Field>\n                        <label>请求金额：(ether)</label>\n                        <Input\n                        value={this.state.value}\n                        onChange={event=>this.setState({value:event.target.value})}\n                        />\n                  </Form.Field>\n                  <Form.Field>\n                        <label>受益人地址：</label>\n                        <Input\n                        value={this.state.recipentAddress}\n                        onChange={event=>this.setState({recipentAddress:event.target.value})}\n                        />\n                  </Form.Field>\n\n        <Message error header=\"错误提示\" content={this.state.errorMessage}/>\n        <Button primary loading={this.state.loading}>增加请求</Button>\n      </Form>\n      </Layout>\n    );\n  }\n}\n\nexport default CompaignNew;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AAJA;AACA;AAaA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AADA;AAGA;AAHA;AACA;AAIA;AAAA;AAAA;AACA;AANA;AAAA;AAAA;AASA;AADA;AACA;AATA;AAYA;AAZA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAaA;AAAA;AAAA;AACA;AAfA;AAgBA;AAAA;AAAA;AACA;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AAkBA;AAAA;AACA;AAEA;AAEA;AAAA;AAGA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAQA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAQA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAMA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAIA;;;AA7DA;;;;;;AACA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;AAbA;AACA;AAyEA;;;;A","sourceRoot":""}